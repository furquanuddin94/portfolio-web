---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCardMinimal from '../components/PostCardMinimal.astro';
import { getCollection } from 'astro:content';

const allPosts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime())
  .slice(0, 3);
---

<BaseLayout
  title="Furquan Uddin - Software Engineer"
  description="Building distributed systems at scale and exploring GenAI applications."
>
  <!-- Hero Section -->
  <section class="container-custom py-20 sm:py-24">
    <div class="max-w-3xl space-y-6">
      <div>
        <h1 class="text-5xl font-bold tracking-tight text-zinc-900 dark:text-zinc-100 sm:text-6xl">
          Hi, I'm <span class="gradient-text">Furquan</span>
        </h1>
        <p class="mt-6 text-xl leading-relaxed text-zinc-600 dark:text-zinc-400">
          I build things and sometimes write about it.
        </p>
      </div>

      <div>
        <p class="text-lg leading-relaxed text-zinc-600 dark:text-zinc-400">
          Lead Engineer at Agoda. I enjoy building distributed systems. Currently building GenAI-powered tools to improve productivity.
        </p>
      </div>
    </div>
  </section>

  <!-- Recent Posts Section -->
  {allPosts.length > 0 && (
    <section class="container-custom py-16">
      <div class="mb-8 flex items-center justify-between">
        <h2 class="text-3xl font-bold text-zinc-900 dark:text-zinc-100">Recent Posts</h2>
        <a href="/blog" class="link text-sm font-medium">
          View all â†’
        </a>
      </div>
      <div class="divide-y divide-zinc-200 dark:divide-zinc-800">
        {allPosts.map((post) => (
          <PostCardMinimal
            slug={post.slug}
            title={post.data.title}
            publishDate={post.data.publishDate}
          />
        ))}
      </div>
    </section>
  )}
</BaseLayout>

